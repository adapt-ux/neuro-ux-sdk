#!/bin/sh
# Check if there are affected projects before running tests
AFFECTED=$(nx show projects --affected --base=HEAD~1 2>/dev/null)

if [ -z "$AFFECTED" ]; then
  # No affected projects, skip tests
  exit 0
fi

# Run tests for affected projects
# Always exit with success to prevent blocking commits
# Tests are informational only in pre-commit hook
nx affected:test --skip-nx-cache >/dev/null 2>&1 || true

# Always exit successfully to allow commits
exit 0
